(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1021:function(e,t,a){},1022:function(e,t,a){},1023:function(e,t,a){},1024:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),s=a.n(i),l=a(19),o=a(93),c=a(17),u=a(482),d=a(95),p=a(194),h=Object(o.createStore)(Object(o.combineReducers)({jsonforms:Object(c.jsonformsReducer)()}),{jsonforms:{renderers:u.materialRenderers}}),m={type:"object",properties:{person:d,address:p}};h.dispatch(c.Actions.init({},m));var f=h,v=a(49),b=a(50),g=a(53),y=a(51),D=a(25),E=a(52),C=a(1034),k=a(148),O=a(1037),j=a(1033),T=a(1035),A=[{key:"Experimental",text:"Experimental",value:"Experimental"},{key:"Calculation",text:"Calculation",value:"Calculation"}];function F(e){return r.a.createElement(T.a,{clearable:!0,options:A,selection:!0,onChange:function(t,a){e.onChange(a.value)}})}var S=[{key:"Spectroscopy",text:"Spectroscopy",value:"Spectroscopy"},{key:"Diffraction",text:"Diffraction",value:"Diffraction"},{key:"Microscopy",text:"Microscopy",value:"Microscopy"}];function x(e){return r.a.createElement(T.a,{clearable:!0,options:S,selection:!0,onChange:function(t,a){e.onChange(a.value)}})}var I=[{key:"Atomistic (Quantum)",text:"Atomistic (Quantum)",value:"Atomistic (Quantum)"},{key:"Atomistic (Classical)",text:"Atomistic (Classical)",value:"Atomistic (Classical)"},{key:"Coarse-Grained",text:"Coarse-Grained",value:"Coarse-Grained"},{key:"Continuum",text:"Continuum",value:"Continuum"}];function N(e){return r.a.createElement(T.a,{clearable:!0,options:I,selection:!0,onChange:function(t,a){e.onChange(a.value)}})}var w=[{key:"NMR",text:"NMR",value:"NMR"},{key:"Neutron",text:"Neutron",value:"Neutron"},{key:"X-ray (Emission)",text:"X-ray (Emission)",value:"X-ray (Emission)"}];function P(e){return r.a.createElement(T.a,{clearable:!0,options:w,selection:!0,onChange:function(t,a){e.onChange(a.value)}})}var U=[{key:"Mechanics",text:"Mechanics",value:"Mechanics"},{key:"Dynamics",text:"Dynamics",value:"Dynamics"},{key:"Phonon",text:"Phonon",value:"Phonon"},{key:"Minimum Energy Path",text:"Minimum Energy Path",value:"Minimum Energy Path"}];function M(e){return r.a.createElement(T.a,{clearable:!0,options:U,selection:!0,onChange:function(t,a){e.onChange(a.value)}})}var R=a(1036),L=a(1039),q=a(200),J=a(284),z=a.n(J),H=a(495),G=(a(1021),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={hightlight:!1},a.fileInputRef=r.a.createRef(),a.openFileDialog=a.openFileDialog.bind(Object(D.a)(a)),a.onFilesAdded=a.onFilesAdded.bind(Object(D.a)(a)),a.onDragOver=a.onDragOver.bind(Object(D.a)(a)),a.onDragLeave=a.onDragLeave.bind(Object(D.a)(a)),a.onDrop=a.onDrop.bind(Object(D.a)(a)),a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"openFileDialog",value:function(){this.props.disabled||this.fileInputRef.current.click()}},{key:"onFilesAdded",value:function(e){if(!this.props.disabled){var t=e.target.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}}}},{key:"onDragOver",value:function(e){e.preventDefault(),this.props.disabed||this.setState({hightlight:!0})}},{key:"onDragLeave",value:function(e){this.setState({hightlight:!1})}},{key:"onDrop",value:function(e){if(e.preventDefault(),!this.props.disabed){var t=e.dataTransfer.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}this.setState({hightlight:!1})}}},{key:"fileListToArray",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push({fileObj:e.item(a),title:e.item(a).name,fileType:"XY file"});return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"Dropzone ".concat(this.state.hightlight?"Highlight":""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.openFileDialog,style:{cursor:this.props.disabled?"default":"pointer"}},r.a.createElement("input",{ref:this.fileInputRef,className:"FileInput",type:"file",multiple:!0,onChange:this.onFilesAdded}),r.a.createElement("img",{alt:"upload",className:"Icon",src:"baseline-cloud_upload-24px.svg"}),r.a.createElement("span",null,"Upload Files"))}}]),t}(n.Component)),X=(a(1022),a(1023),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ProgressBar"},r.a.createElement("div",{className:"Progress",style:{width:this.props.progress+"%"}}))}}]),t}(n.Component)),Q=a(1040),_=a(1032),B=a(147),V=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={files:[],uploading:!1,uploadProgress:{},successfullUploaded:!1},a.onFilesAdded=a.onFilesAdded.bind(Object(D.a)(a)),a.uploadFiles=a.uploadFiles.bind(Object(D.a)(a)),a.sendRequest=a.sendRequest.bind(Object(D.a)(a)),a.renderActions=a.renderActions.bind(Object(D.a)(a)),a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"onFilesAdded",value:function(e){this.setState(function(t){return{files:t.files.concat(e)}})}},{key:"uploadFiles",value:function(){var e=Object(H.a)(z.a.mark(function e(){var t,a=this;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({uploadProgress:{},uploading:!0}),t=[],this.state.files.forEach(function(e){t.push(a.sendRequest(e))}),e.prev=3,e.next=6,Promise.all(t);case 6:this.setState({successfullUploaded:!0,uploading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({successfullUploaded:!0,uploading:!1});case 12:this.fakeRetrieveFiles();case 13:case"end":return e.stop()}},e,this,[[3,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"fakeRetrieveFiles",value:function(){var e=this,t=this.state.files.map(function(t){return e.fakeRetrieveFile(t)});console.log(t)}},{key:"fakeRetrieveFile",value:function(e){return e.schema=d,e.uischema=B,e.path="person",e}},{key:"sendRequest",value:function(e){var t=this;return new Promise(function(a,n){var r=new XMLHttpRequest;r.upload.addEventListener("progress",function(a){if(a.lengthComputable){var n=Object(q.a)({},t.state.uploadProgress);n[e.name]={state:"pending",percentage:a.loaded/a.total*100},t.setState({uploadProgress:n})}}),r.upload.addEventListener("load",function(n){var i=Object(q.a)({},t.state.uploadProgress);i[e.name]={state:"done",percentage:100},t.setState({uploadProgress:i}),a(r.response)}),r.upload.addEventListener("error",function(a){var i=Object(q.a)({},t.state.uploadProgress);i[e.name]={state:"error",percentage:0},t.setState({uploadProgress:i}),n(r.response)});var i=new FormData;i.append("file",e),r.open("POST","http://localhost:8000/upload"),r.send(i)})}},{key:"renderProgress",value:function(e){var t=this.state.uploadProgress[e.name];if(this.state.uploading||this.state.successfullUploaded)return r.a.createElement("div",{className:"ProgressWrapper"},r.a.createElement(X,{progress:t?t.percentage:0}),r.a.createElement("img",{className:"CheckIcon",alt:"done",src:"baseline-check_circle_outline-24px.svg",style:{opacity:t&&"done"===t.state?.5:0}}))}},{key:"renderActions",value:function(){var e=this;return this.state.successfullUploaded?r.a.createElement("button",{onClick:function(){return e.setState({files:[],successfullUploaded:!1})}},"Clear"):r.a.createElement("button",{disabled:this.state.files.length<0||this.state.uploading,onClick:this.uploadFiles},"Upload")}},{key:"handleTitleChange",value:function(e){for(var t=this.state.files,a=[],n=e.target.defaultValue,r=e.target.value,i=0;i<t.length;i++)t[i].title===n?a[i]={fileObj:t[i].fileObj,title:r}:a[i]=t[i];this.setState({files:a})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Upload"},r.a.createElement("span",{className:"Title"},"Upload Files"),r.a.createElement("div",{className:"Content"},r.a.createElement("div",null,r.a.createElement(G,{onFilesAdded:this.onFilesAdded,disabled:this.state.uploading||this.state.successfullUploaded})),r.a.createElement("div",{className:"Files"},this.state.files.map(function(t){return r.a.createElement("div",{key:t.fileObj.name,className:"Row"},r.a.createElement(L.a,null,r.a.createElement(Q.a,{columns:2,relaxed:"very"},r.a.createElement(Q.a.Column,null,r.a.createElement(k.a,{horizontal:!0},"Filename:")," ",t.fileObj.name),r.a.createElement(Q.a.Column,null,r.a.createElement(_.a,{key:t.fileObj.name,size:"mini",label:"Title:",defaultValue:t.title,onChange:e.handleTitleChange.bind(e)})))),e.renderProgress(t))}))),r.a.createElement("div",{className:"Actions"},this.renderActions()))}}]),t}(n.Component),W=a(1025),Y=a(26),K=a(97);a(479);function Z(e){return r.a.createElement(R.a.Item,{key:e.name,active:e.isActive,onClick:e.changeTab,as:"a"},e.title,"  ",r.a.createElement(K.a,{name:"remove circle",onClick:e.removeTab}))}function $(e){var t=e.display,a=e.activeItem;return r.a.createElement("div",null,r.a.createElement(R.a,{pointing:!0,secondary:!0},r.a.createElement(R.a.Item,{name:"Input",active:"Input"===a,onClick:function(){return e.changeChildTab("Input")}}),r.a.createElement(R.a.Item,{name:"JSON-LD",active:"JSON-LD"===a,onClick:function(){return e.changeChildTab("JSON-LD")}})),r.a.createElement(L.a,null,t))}var ee=a(496),te={name:"dataset1",title:"Dataset 1",schema:d,uischema:B,path:"person"},ae={name:"dataset3",title:"Dataset 3",schema:d,uischema:B,path:"person"},ne=[te,{name:"dataset2",title:"Dataset 2",schema:p,uischema:ee,path:"address"}],re=function(e){function t(e){var a;Object(v.a)(this,t),a=Object(g.a)(this,Object(y.a)(t).call(this,e));var n=te.name,i=te.schema,s=te.uischema,l=te.path;return a.state={activeItem:n,childActiveItem:"Input",childDisplay:a.renderJsonForm(i,s,l)},a.defaultDisplay=r.a.createElement("h1",null," "),a.changeTab=a.changeTab.bind(Object(D.a)(a)),a.changeChildTab=a.changeChildTab.bind(Object(D.a)(a)),a.removeTab=a.removeTab.bind(Object(D.a)(a)),a.renderTabFromDataset=a.renderTabFromDataset.bind(Object(D.a)(a)),a.renderTabs=a.renderTabs.bind(Object(D.a)(a)),a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"changeTab",value:function(e){this.setState({activeItem:e})}},{key:"changeChildTab",value:function(e){this.setState({childActiveItem:e})}},{key:"removeTab",value:function(e){var t=this.props.datasets.filter(function(t){return t.name!==e});this.props.handleUpdateDatasets(t)}},{key:"removeAllTabs",value:function(){this.props.handleUpdateDatasets([]),this.setState({display:this.defaultDisplay})}},{key:"renderTabFromDataset",value:function(e){var t=this,a=this.state.activeItem===e.name;return r.a.createElement(Z,{key:e.name,name:e.name,title:e.title,isActive:a,changeTab:function(){return t.changeTab(e.name)},removeTab:function(){return t.removeTab(e.name)}})}},{key:"renderJsonForm",value:function(e){var t=this;return r.a.createElement("div",null,r.a.createElement(Y.JsonForms,{schema:e.schema,uischema:e.uischema,path:e.path}),r.a.createElement(W.a,{content:"Submit",color:"red",onClick:function(){return t.removeTab(e.name)}}))}},{key:"renderActiveTabPanel",value:function(){var e=this.state.activeItem,t=this.props.datasets.filter(function(t){return e===t.name})[0],a=this.state.childActiveItem;if(void 0===t)return this.defaultDisplay;var n,i=this.props.data[t.path];return n="Input"===a?this.renderJsonForm(t):JSON.stringify(i,null,2),r.a.createElement($,{activeItem:a,display:n,changeChildTab:this.changeChildTab})}},{key:"renderTabs",value:function(){var e=this;return this.props.datasets.map(function(t){return e.renderTabFromDataset(t)})}},{key:"render",value:function(){var e=this,t=this.renderActiveTabPanel(),a=this.renderTabs();return r.a.createElement("div",null,r.a.createElement(W.a,{content:"Submit All Datasets",color:"blue",onClick:function(){return e.removeAllTabs()}}),r.a.createElement(Q.a,null,r.a.createElement(Q.a.Column,{width:4},r.a.createElement(R.a,{fluid:!0,vertical:!0,tabular:!0},a)),r.a.createElement(Q.a.Column,{stretched:!0,width:12},t)))}}]),t}(n.Component),ie=Object(l.connect)(function(e){return{data:Object(c.getData)(e)}})(re),se=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={activeItem:"File Upload",display:a.renderFileUpload(),datasets:ne},a.changeTab=a.changeTab.bind(Object(D.a)(a)),a.updateDatasets=a.updateDatasets.bind(Object(D.a)(a)),a.addDataset=a.addDataset.bind(Object(D.a)(a)),a.setState=a.setState.bind(Object(D.a)(a)),a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"renderSciDataTab",value:function(e){return r.a.createElement(ie,{datasets:e,handleUpdateDatasets:this.updateDatasets})}},{key:"renderFileUploadOld",value:function(){return r.a.createElement("button",{onClick:this.addDataset}," Add Dataset 3")}},{key:"renderFileUpload",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Card"},r.a.createElement(V,null)))}},{key:"changeTab",value:function(e){var t;"File Upload"===e?t=this.renderFileUpload():"SciData"===e&&(t=this.renderSciDataTab(this.state.datasets)),this.setState({activeItem:e,display:t})}},{key:"updateDatasets",value:function(e){var t=this.renderSciDataTab(e);this.setState({datasets:e,display:t})}},{key:"addDataset",value:function(){var e=this.state.datasets;e.push(ae),this.setState({datasets:e})}},{key:"render",value:function(){var e=this,t=this.state.activeItem,a=this.state.display;return r.a.createElement("div",null,r.a.createElement(R.a,{tabular:!0},r.a.createElement(R.a.Item,{name:"File Upload",active:"File Upload"===t,onClick:function(){return e.changeTab("File Upload")}}),r.a.createElement(R.a.Item,{name:"SciData",active:"SciData"===t,onClick:function(){return e.changeTab("SciData")}})),r.a.createElement(L.a,null,a))}}]),t}(r.a.Component),le=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).renderDropDown=function(e,t){return r.a.createElement(C.a,null,r.a.createElement(C.a.Field,null,r.a.createElement(k.a,{color:"red"},e,": ")," ",t))},a.renderMethodDropDown=function(){return a.renderDropDown("Method",r.a.createElement(F,{onChange:a.handleMethodChange}))},a.renderTechniqueDropDown=function(e){return a.renderDropDown("Technique",e)},a.renderTypeDropDown=function(e){return a.renderDropDown("Type",e)},a.handleMethodChange=function(e){var t=a.state.display;t="Experimental"===e?[a.renderMethodDropDown(),a.renderTechniqueDropDown(r.a.createElement(x,{onChange:a.handleTechniqueChange}))]:"Calculation"===e?[a.renderMethodDropDown(),a.renderTechniqueDropDown(r.a.createElement(N,{onChange:a.handleTechniqueChange}))]:[a.renderMethodDropDown()],a.setState({display:t})},a.handleTechniqueChange=function(e){console.log("handleTechniqueChange"),console.log(e);var t=a.state.display;"Spectroscopy"===e?t.push(a.renderTypeDropDown(r.a.createElement(P,{onChange:a.handleTypeChange}))):"Atomistic (Quantum)"===e?t.push(a.renderTypeDropDown(r.a.createElement(M,{onChange:a.handleTypeChange}))):""===e?t=a.state.display:t.push(r.a.createElement("h1",null," Coming soon...")),a.setState({display:t})},a.handleTypeChange=function(e){console.log(e);var t=a.state.display;t.push(r.a.createElement("div",null," ",r.a.createElement(se,null)," ")),a.setState({display:t})},a.state={display:[a.renderMethodDropDown()],methodSelected:!1,techniqueSelected:!1},a.handleMethodChange=a.handleMethodChange.bind(Object(D.a)(a)),a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.state.display;return r.a.createElement("div",null,r.a.createElement(O.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement("img",{src:"logo.6023b87e.png",alt:""}),"Data Ingestion",r.a.createElement(O.a.Subheader,null,"Upload files from multi-method data sources")),r.a.createElement(j.a,{style:{margin:20}},e))}}]),t}(r.a.Component);s.a.render(r.a.createElement(l.Provider,{store:f},r.a.createElement(le,null)),document.getElementById("root"))},147:function(e){e.exports={type:"Group",label:"Person",elements:[{type:"HorizontalLayout",elements:[{type:"Control",scope:"#/properties/firstName"},{type:"Control",scope:"#/properties/lastName"}]},{type:"HorizontalLayout",elements:[{type:"Control",scope:"#/properties/age"},{type:"Control",scope:"#/properties/shippingAddress"}]}]}},194:function(e){e.exports={title:"Order",type:"object",properties:{addressId:{type:"string",label:"Address Type",enum:["Home Address 1","Home Address 2","Workplace"]},street:{type:"string"},city:{type:"string"},zipCode:{type:"string"}}}},496:function(e){e.exports={type:"Group",label:"Address",elements:[{type:"HorizontalLayout",elements:[{type:"Control",scope:"#/properties/addressId"},{type:"Control",scope:"#/properties/street"}]},{type:"HorizontalLayout",elements:[{type:"Control",scope:"#/properties/city"},{type:"Control",scope:"#/properties/zipCode"}]}]}},509:function(e,t,a){e.exports=a(1024)},661:function(e,t){},669:function(e,t){},671:function(e,t){},95:function(e){e.exports={title:"Person",type:"object",properties:{firstName:{type:"string"},lastName:{type:"string"},age:{description:"Age in years",type:"integer",minimum:0},shippingAddress:{type:"string"}},required:["firstName","lastName"]}}},[[509,1,2]]]);
//# sourceMappingURL=main.93d07d15.chunk.js.map